<!doctype html>
<html lang="tr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Hesap Silme Talebi | Oyununuz</title>
  <meta name="description" content="Firebase Auth kullanan kullanıcılar için hesap silme talep formu." />
  <style>
    body { font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif; margin: 0; background:#0b0f17; color:#e7eaf0; }
    .wrap { max-width: 720px; margin: 40px auto; padding: 24px; }
    .card { background:#121a27; border:1px solid #22304a; border-radius:16px; padding: 20px; box-shadow: 0 10px 30px rgba(0,0,0,.25); }
    h1 { font-size: 22px; margin: 0 0 8px; }
    p { line-height: 1.5; color:#b7c0d6; }
    label { display:block; font-size: 13px; margin: 14px 0 6px; color:#cbd5e1; }
    input, select, textarea {
      width: 100%; box-sizing: border-box; padding: 12px 12px;
      border-radius: 12px; border:1px solid #2a3a5a; background:#0f1623; color:#e7eaf0;
      outline: none;
    }
    input:focus, select:focus, textarea:focus { border-color:#4c7dff; }
    textarea { min-height: 92px; resize: vertical; }
    .row { display:flex; gap:12px; }
    .row > div { flex:1; }
    .hint { font-size: 12px; color:#93a4c7; margin-top: 6px; }
    .btn {
      margin-top: 16px; width:100%; padding: 12px 14px;
      border-radius: 12px; border: 0; background:#4c7dff; color:white; font-weight: 650;
      cursor:pointer;
    }
    .btn:disabled { opacity:.6; cursor:not-allowed; }
    .small { font-size: 12px; color:#93a4c7; margin-top: 14px; }
    .ok, .err { margin-top: 14px; padding: 12px; border-radius: 12px; display:none; }
    .ok { background:#0f2a1a; border:1px solid #1f6f3a; color:#b7f7cd; }
    .err { background:#2a1010; border:1px solid #7a2b2b; color:#ffd1d1; }
    a { color:#9bb7ff; }
  </style>
</head>
<body>
  <div class="wrap">
    <div class="card">
      <h1>Hesap Silme Talebi</h1>
      <p>
        Bu sayfa, oyunumuzdaki <b>Firebase Auth</b> hesabınızın silinmesi için talep oluşturmanızı sağlar.
        Talebiniz alındıktan sonra kimlik doğrulama amacıyla sizinle iletişime geçilebilir.
      </p>

      <!-- ✅ Formspree / Getform / Basin gibi sunucusuz form servislerinden birini kullan -->
      <!-- action içindeki URL’i kendi endpoint’inle değiştir -->
      <form id="deleteForm" action="https://formspree.io/f/xbdajkoq" method="POST">
        <!-- İstersen form servisinde email konu/body düzenlemek için bu gizli alanları kullanabilirsin -->
        <input type="hidden" name="form_type" value="account_deletion_request" />
        <input type="hidden" name="app_name" value="Food Life Simulator" />

        <label>Talep Türü</label>
        <select name="request_type" required>
          <option value="delete_account" selected>Hesabımı silmek istiyorum</option>
          <option value="delete_data">Verilerimi silmek istiyorum</option>
          <option value="both">Hesap + Verilerimi silmek istiyorum</option>
        </select>

        <div class="row">
          <div>
            <label>Oyunda kullandığınız e-posta</label>
            <input name="login_email" type="email" placeholder="ornek@mail.com" required />
            <div class="hint">Firebase Auth ile giriş yaptığınız e-posta.</div>
          </div>
          <div>
            <label>İletişim e-postası</label>
            <input name="contact_email" type="email" placeholder="size ulaşabileceğimiz e-posta" required />
            <div class="hint">Aynı olabilir.</div>
          </div>
        </div>

        <div class="row">
          <div>
            <label>Giriş yöntemi</label>
            <select name="login_method" required>
              <option value="google">Google ile giriş</option>
              <option value="email_password">E-posta/Şifre</option>
              <option value="apple">Apple</option>
              <option value="other">Diğer</option>
            </select>
          </div>
          <div>
            <label>Oyun içi Kullanıcı ID (varsa)</label>
            <input name="player_id" type="text" placeholder="PlayerID / UID / Nick" />
            <div class="hint">Bulabiliyorsanız yazın (ayarlar ekranı gibi).</div>
          </div>
        </div>

        <label>Silme kapsamı / Not</label>
        <textarea name="details" placeholder="Örn: Satın alımlarım saklansın mı? Hesabımı tamamen kapatın mı?"></textarea>

        <label>
          <input type="checkbox" id="confirm" required style="width:auto; margin-right:8px; vertical-align:middle;">
          Bu talebin bana ait olduğunu ve hesabımın silinmesinin geri alınamayacağını anlıyorum.
        </label>

        <button class="btn" type="submit" id="submitBtn">Talebi Gönder</button>

        <div class="ok" id="okMsg">Talebiniz alındı. En kısa sürede e-posta ile dönüş yapılacaktır.</div>
        <div class="err" id="errMsg">Gönderim sırasında hata oluştu. Lütfen daha sonra tekrar deneyin.</div>

        <p class="small">
          Gizlilik: Bu formdaki bilgiler yalnızca hesap silme talebinizi işlemek için kullanılır.
          Detaylar için <a href="privacy.html">Gizlilik Politikası</a>.
        </p>
      </form>
    </div>
  </div>

  <script>
    // Formspree gibi servislerde "AJAX" ile aynı sayfada başarı mesajı göstermek için:
    const form = document.getElementById("deleteForm");
    const okMsg = document.getElementById("okMsg");
    const errMsg = document.getElementById("errMsg");
    const btn = document.getElementById("submitBtn");

    form.addEventListener("submit", async (e) => {
      e.preventDefault();
      okMsg.style.display = "none";
      errMsg.style.display = "none";
      btn.disabled = true;

      try {
        const data = new FormData(form);
        const res = await fetch(form.action, {
          method: "POST",
          body: data,
          headers: { "Accept": "application/json" }
        });

        if (res.ok) {
          form.reset();
          okMsg.style.display = "block";
        } else {
          errMsg.style.display = "block";
        }
      } catch (err) {
        errMsg.style.display = "block";
      } finally {
        btn.disabled = false;
      }
    });
  </script>
</body>

</html>
